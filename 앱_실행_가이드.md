# GF KIDS 출결관리 앱 실행 가이드

## 📱 개발 완료된 앱 개요

기존 Android 앱과 100% 동일한 기능을 가진 Flutter 기반 출결관리 앱이 완성되었습니다.

### ✨ 주요 기능
- **가온 얼굴인식 시스템 연동**
- **LMS 백엔드 API 연동**
- **오프라인 지원 및 자동 동기화**
- **한국어 TTS 음성 안내**
- **학생 관리 및 얼굴 등록**
- **70:30 가로 레이아웃 (Android와 동일)**

---

## 🚀 1단계: 개발 환경 준비

### 1.1 Flutter SDK 설치 확인
```bash
flutter --version
```
**결과 예시:**
```
Flutter 3.24.0 • channel stable
Dart 3.5.0
```

### 1.2 Flutter Doctor 실행
```bash
flutter doctor
```
**확인 사항:**
- ✅ Flutter SDK
- ✅ Android toolchain
- ✅ VS Code 또는 Android Studio
- ✅ Connected device

---

## 📂 2단계: 프로젝트 준비

### 2.1 프로젝트 디렉토리로 이동
```bash
cd "C:\Users\psh08\Desktop\뉴가온출결\newgaon-LMS\gf_attendance"
```

### 2.2 패키지 설치
```bash
flutter pub get
```

### 2.3 패키지 설치 완료 확인
다음 패키지들이 설치되었는지 확인:
- ✅ camera: 카메라 기능
- ✅ dio: HTTP 통신
- ✅ sqflite: 로컬 데이터베이스
- ✅ audioplayers: 사운드 재생
- ✅ flutter_tts: 음성 합성
- ✅ provider: 상태 관리

---

## 🎯 3단계: 앱 실행 전 설정

### 3.1 디바이스 연결 확인
```bash
flutter devices
```

**안드로이드 디바이스 연결 방법:**
1. 안드로이드 폰에서 **개발자 옵션** 활성화
2. **USB 디버깅** 활성화
3. USB로 PC와 연결
4. 디바이스에서 **디버깅 허용** 선택

### 3.2 카메라 권한 설정 확인
`android/app/src/main/AndroidManifest.xml` 파일에서 권한 확인:
```xml
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
```

---

## 🏃‍♂️ 4단계: 앱 실행

### 4.1 Debug 모드로 실행
```bash
flutter run
```

### 4.2 Release 모드로 실행 (권장)
```bash
flutter run --release
```

### 4.3 특정 디바이스에서 실행
```bash
flutter run -d [device-id]
```

---

## 📋 5단계: 실행 후 확인 사항

### 5.1 화면 구성 확인
- **좌측 70%**: 카메라 프리뷰 영역
- **우측 30%**: 메뉴 및 키패드 영역
- **가로 모드 고정** 확인

### 5.2 기본 기능 테스트

#### A. 카메라 기능
1. 카메라 프리뷰가 정상 표시되는지 확인
2. 우하단 **카메라 전환 버튼** 클릭 테스트
3. 얼굴 가이드 원형이 표시되는지 확인

#### B. 출결 버튼 테스트
1. **등원, 하원, 외출, 복귀, 조퇴** 버튼 클릭
2. 버튼 클릭 시 상태 메시지 변경 확인
3. 얼굴 인식 모드 활성화 확인

#### C. 키패드 기능
1. 숫자 키패드 입력 테스트
2. **C**(클리어), **B**(백스페이스) 버튼 테스트
3. 키패드 입력 후 출결 버튼 클릭

#### D. 학생 관리 기능
1. 우하단 **학생관리** 버튼 클릭
2. 학생 관리 다이얼로그 열림 확인
3. **얼굴등록** 버튼 클릭으로 카메라 등록 화면 확인

### 5.3 사운드 시스템 확인
- 키패드 클릭 시 클릭 사운드
- 성공/실패 시 ok.wav/no.wav 재생
- TTS 음성 안내 (한국어)

---

## ⚙️ 6단계: 서버 연동 설정 (선택사항)

### 6.1 가온 얼굴인식 서버 설정
앱 실행 후 설정에서 다음 정보 입력:
- **Face API Base URL**: `https://your-gaon-server.com`
- **Client Token**: 가온에서 제공하는 클라이언트 토큰
- **Group ID**: 지점/그룹 ID

### 6.2 LMS 백엔드 서버 설정
- **LMS Base URL**: `https://your-lms-server.com`
- **Branch ID**: 지점 ID
- **Login ID/PW**: 관리자 계정

---

## 🔧 문제 해결 가이드

### 자주 발생하는 문제들

#### 문제 1: 카메라 권한 오류
**해결방법:**
```bash
flutter clean
flutter pub get
flutter run
```
앱 실행 후 카메라 권한을 수동으로 허용

#### 문제 2: 패키지 의존성 오류
**해결방법:**
```bash
flutter clean
flutter pub cache repair
flutter pub get
```

#### 문제 3: 빌드 오류
**해결방법:**
1. Android SDK 업데이트
2. Gradle 캐시 삭제:
```bash
cd android
./gradlew clean
cd ..
flutter clean
flutter run
```

#### 문제 4: TTS 음성이 들리지 않음
**확인사항:**
- 디바이스 볼륨 설정
- 한국어 TTS 엔진 설치 여부
- 앱 오디오 권한 허용

#### 문제 5: 가로 모드가 안됨
**해결방법:**
- 디바이스 자동 회전 설정 확인
- 앱에서 강제 가로 모드 설정 적용됨

---

## 📊 성능 최적화 팁

### 메모리 사용량 모니터링
```bash
flutter run --profile
```

### APK 빌드 (배포용)
```bash
flutter build apk --release
```
빌드된 APK 위치: `build/app/outputs/flutter-apk/app-release.apk`

### AAB 빌드 (Google Play 배포용)
```bash
flutter build appbundle --release
```

---

## 📱 앱 사용 시나리오

### 시나리오 1: 얼굴인식 출결
1. **등원** 버튼 클릭
2. 카메라 앞에 얼굴 위치
3. 자동 인식 및 음성 안내
4. "OOO님이 등원처리 되었습니다. 어서오세요" 음성 재생

### 시나리오 2: 키패드 출결
1. 키패드로 학번 입력 (예: 202401001)
2. **하원** 버튼 클릭
3. 학생 정보 확인 후 처리
4. "OOO님이 하원처리 되었습니다. 안녕히 가세요" 음성 재생

### 시나리오 3: 학생 얼굴 등록
1. **학생관리** 버튼 클릭
2. 학생 목록에서 **얼굴등록** 클릭
3. 카메라 화면에서 얼굴 촬영
4. 가온 서버에 등록 완료

---

## 🎯 최종 확인 체크리스트

### 필수 기능 확인
- [ ] 앱이 가로 모드로 실행됨
- [ ] 카메라 프리뷰가 정상 표시됨
- [ ] 5개 출결 버튼이 모두 동작함
- [ ] 키패드 입력이 정상 동작함
- [ ] 학생관리 다이얼로그가 열림
- [ ] 얼굴등록 카메라가 동작함
- [ ] 사운드가 정상 재생됨
- [ ] TTS 음성이 정상 재생됨

### 고급 기능 확인 (서버 연동 시)
- [ ] 가온 얼굴인식 API 연동
- [ ] LMS 백엔드 API 연동
- [ ] 오프라인 모드에서 로컬 저장
- [ ] 온라인 복구 시 자동 동기화
- [ ] 실시간 학생 목록 업데이트

---

## 📞 지원 및 문의

### 개발 관련 문의
- **프로젝트 위치**: `C:\Users\psh08\Desktop\뉴가온출결\newgaon-LMS\gf_attendance`
- **로그 확인**: `flutter logs` 명령어로 실시간 로그 확인
- **디버그 정보**: VS Code에서 F5로 디버그 모드 실행

### 앱 상태 정보
- **버전**: 1.0.0+1
- **Flutter SDK**: 3.0.0 이상 요구
- **타겟 플랫폼**: Android 21+ (Android 5.0 이상)
- **권장 해상도**: 1920x1080 이상 (태블릿 권장)

---

**🎉 축하합니다! GF KIDS 출결관리 앱이 성공적으로 실행되었습니다!**

> 이 가이드대로 진행하면 기존 Android 앱과 동일한 Flutter 앱을 실행할 수 있습니다. 문제가 발생하면 문제 해결 가이드를 참고하여 해결해보세요.